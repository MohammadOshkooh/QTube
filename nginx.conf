user www-data;
worker_processes auto;
pid /run/nginx.pid;

events {
	worker_connections 768;
}

http {
	include /etc/nginx/mime.types;
	default_type application/octet-stream;

	access_log /var/log/nginx/access.log;
	error_log /var/log/nginx/error.log;
    client_max_body_size 10m;

    upstream django {
        server app:8002;
    }

    server {
        listen [::]:443; #ssl ipv6only=on; # managed by Certbot
        listen 443 ssl; # managed by Certbot
        server_name vera101.com www.vera101.com;

        location / {
        proxy_pass              http://django;
        proxy_set_header        Host $host;
        proxy_set_header    X-Forwarded-Proto $scheme;
        }

        location /static/ {
            add_header Access-Control-Allow-Origin *;
            autoindex on;
            alias /statics/;
        }
    }

    server {
        listen 80;
        listen [::]:80;
;         server_name ;

        return 301 https://$host$request_uri;

    }


}